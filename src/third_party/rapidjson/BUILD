cc_library(
    name = "rapidjson",
    hdrs = [
        "include/allocators.h",
        "include/cursorstreamwrapper.h",
        "include/document.h",
        "include/encodedstream.h",
        "include/encodings.h",
        "include/error/en.h",
        "include/error/error.h",
        "include/filereadstream.h",
        "include/filewritestream.h",
        "include/fwd.h",
        "include/internal/biginteger.h",
        "include/internal/diyfp.h",
        "include/internal/dtoa.h",
        "include/internal/ieee754.h",
        "include/internal/itoa.h",
        "include/internal/meta.h",
        "include/internal/pow10.h",
        "include/internal/regex.h",
        "include/internal/stack.h",
        "include/internal/strfunc.h",
        "include/internal/strtod.h",
        "include/internal/swap.h",
        "include/istreamwrapper.h",
        "include/memorybuffer.h",
        "include/memorystream.h",
        "include/msinttypes/inttypes.h",
        "include/msinttypes/stdint.h",
        "include/ostreamwrapper.h",
        "include/pointer.h",
        "include/prettywriter.h",
        "include/rapidjson.h",
        "include/reader.h",
        "include/schema.h",
        "include/stream.h",
        "include/stringbuffer.h",
        "include/writer.h",
    ],
    strip_include_prefix = "include",
    #visibility = ["//src:__pkg__"],
    visibility = ["//visibility:public"],
)

genrule(
    name = "rapidjson_dsym",
    srcs = ["//src/third_party/rapidjson:rapidjson"],
    outs = ["librapidjson.dSYM"],
    output_to_bindir = True,
    cmd = "dsymutil $(locations //src/third_party/rapidjson:rapidjson)[0] -o $@"
)